\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{dawushiyan}[2021/4/23 ver0.1]

\RequirePackage[depythontex]{pythontex}

\begin{pycode}
import statistics
def Average(pre, data, digit, suf):
    sumstr = '+'.join(
      ["{:.{}f}".format(
        i, digit
      )
    for i in data])
    avg = statistics.mean(data)
    print(
      R'\[{} \frac{{{}}}{{{}}} {} = {:.{}f} {}\]'.format(
        pre,
        sumstr, len(data), suf,
        avg, digit + 1, suf
      )
    )
def StandardDeviation(pre, data, digit, suf):
    avg = statistics.mean(data)
    sumstr = '+'.join(
      "({:.{}f}-{:.{}f})^2".format(
        i, digit, avg, digit + 1
      )
    for i in data)
    sigma = statistics.stdev(data)
    print(
      R'\[{} \sqrt{{\frac{{{}}}{{{}-1}}}} {} = {:.{}f} {}\]'.format(
        pre,
        sumstr, len(data), suf,
        sigma, digit + 1, suf
      )
    )
\end{pycode}

\newcommand{\average}[4]{\pyc{Average(R"#1",[#2],#3,R"#4")}}
\newcommand{\stdev}[4]{\pyc{StandardDeviation(R"#1",[#2],#3,R"#4")}}

\endinput